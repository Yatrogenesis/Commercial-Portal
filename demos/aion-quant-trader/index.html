<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AION-Quant Trader Enterprise - AI-Powered Algorithmic Trading</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #10b981;
            --secondary: #059669;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --gray: #6b7280;
            --light: #f3f4f6;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #7c3aed 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        h1 { font-size: 2.5em; margin-bottom: 10px; }
        .subtitle { opacity: 0.9; font-size: 1.1em; margin-bottom: 15px; }
        .badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9em;
        }
        main { padding: 30px; }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .card {
            background: white;
            border: 2px solid var(--light);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
        }
        .card:hover { border-color: var(--primary); box-shadow: 0 5px 15px rgba(16,185,129,0.2); }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .card-title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--dark);
        }
        .card-value {
            font-size: 2em;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }
        .card-change {
            font-size: 0.9em;
            padding: 5px 10px;
            border-radius: 6px;
            display: inline-block;
        }
        .positive { background: #d1fae5; color: var(--primary); }
        .negative { background: #fee2e2; color: var(--danger); }
        .section { margin-bottom: 30px; }
        .section-title {
            font-size: 1.5em;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        label {
            font-weight: 600;
            color: var(--dark);
            font-size: 0.9em;
        }
        select, input {
            padding: 10px;
            border: 2px solid var(--light);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s;
        }
        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
        }
        button {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(16,185,129,0.3);
        }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        button.danger {
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
        }
        .trade-log {
            background: var(--light);
            border-radius: 8px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        .trade-entry {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .trade-entry.sell { border-left-color: var(--danger); }
        .trade-info { flex: 1; }
        .trade-symbol {
            font-weight: 700;
            font-size: 1.1em;
            color: var(--dark);
        }
        .trade-details {
            font-size: 0.9em;
            color: var(--gray);
            margin-top: 5px;
        }
        .trade-pnl {
            font-size: 1.3em;
            font-weight: 700;
        }
        .info-box {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .alert-box {
            background: #fef3c7;
            border-left: 4px solid var(--warning);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .chart-placeholder {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            border-radius: 8px;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            font-size: 1.2em;
            border: 2px dashed var(--gray);
        }
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        .status-active { background: var(--primary); box-shadow: 0 0 10px var(--primary); }
        .status-inactive { background: var(--gray); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìà AION-Quant Trader Enterprise</h1>
            <p class="subtitle">AI-Powered Algorithmic Trading Platform</p>
            <div>
                <span class="badge">‚ö° Real-time Analysis</span>
                <span class="badge">ü§ñ 6 AI Models</span>
                <span class="badge">üìä Risk Management</span>
                <span class="badge">üîí Secure</span>
            </div>
        </header>

        <main>
            <div class="info-box">
                <strong>üîë GitHub Models Integration:</strong> Get your free GitHub Personal Access Token at
                <a href="https://github.com/settings/tokens" target="_blank">github.com/settings/tokens</a>
                (Permissions: Metadata - Read-only)
            </div>

            <div class="alert-box">
                <strong>‚ö†Ô∏è Demo Mode:</strong> This is a demonstration using simulated market data.
                Real trading requires proper licenses and risk management protocols.
            </div>

            <!-- Dashboard Stats -->
            <div class="dashboard">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Portfolio Value</span>
                        <span class="status-indicator status-active"></span>
                    </div>
                    <div class="card-value" id="portfolio-value">$0.00</div>
                    <span class="card-change positive" id="portfolio-change">+0.00%</span>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Today's P&L</span>
                        <span>üí∞</span>
                    </div>
                    <div class="card-value" id="daily-pnl" style="color: var(--primary);">$0.00</div>
                    <span class="card-change positive" id="daily-pnl-pct">+0.00%</span>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Total Trades</span>
                        <span>üìä</span>
                    </div>
                    <div class="card-value" id="total-trades">0</div>
                    <span class="card-change" style="background: #e0e7ff; color: #4f46e5;" id="win-rate">0% Win Rate</span>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">AI Confidence</span>
                        <span>ü§ñ</span>
                    </div>
                    <div class="card-value" id="ai-confidence">0%</div>
                    <span class="card-change" style="background: #f3e8ff; color: #7c3aed;">Model: GPT-4o</span>
                </div>
            </div>

            <!-- Trading Controls -->
            <div class="section">
                <div class="section-title">
                    <span>‚öôÔ∏è</span>
                    Trading Configuration
                </div>

                <div class="controls">
                    <div class="control-group">
                        <label for="github-token">GitHub Token</label>
                        <input type="password" id="github-token" placeholder="github_pat_...">
                    </div>

                    <div class="control-group">
                        <label for="ai-model">AI Model</label>
                        <select id="ai-model">
                            <option value="gpt-4o-mini">GPT-4o-mini (Fast)</option>
                            <option value="Mistral-Medium-3">Mistral Medium 3 (Advanced)</option>
                            <option value="Mistral-Small-3">Mistral Small 3 (Balanced)</option>
                            <option value="Phi-4">Phi-4 (Efficient)</option>
                            <option value="Meta-Llama-3.1-70B-Instruct">Llama 3.1 70B (Large)</option>
                            <option value="Meta-Llama-3.1-8B-Instruct">Llama 3.1 8B (Fast)</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="symbol">Trading Symbol</label>
                        <select id="symbol">
                            <option value="BTC/USD">BTC/USD</option>
                            <option value="ETH/USD">ETH/USD</option>
                            <option value="AAPL">AAPL</option>
                            <option value="TSLA">TSLA</option>
                            <option value="NVDA">NVDA</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="strategy">Trading Strategy</label>
                        <select id="strategy">
                            <option value="momentum">Momentum Trading</option>
                            <option value="meanreversion">Mean Reversion</option>
                            <option value="breakout">Breakout Detection</option>
                            <option value="arbitrage">Statistical Arbitrage</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="risk-level">Risk Level</label>
                        <select id="risk-level">
                            <option value="conservative">Conservative</option>
                            <option value="moderate" selected>Moderate</option>
                            <option value="aggressive">Aggressive</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="position-size">Position Size ($)</label>
                        <input type="number" id="position-size" value="10000" min="1000" max="1000000" step="1000">
                    </div>
                </div>

                <div style="display: flex; gap: 15px; margin-top: 20px;">
                    <button id="start-bot" onclick="startTrading()">
                        üöÄ Start AI Trading Bot
                    </button>
                    <button id="stop-bot" onclick="stopTrading()" class="danger" disabled>
                        ‚èπÔ∏è Stop Trading
                    </button>
                    <button onclick="analyzeMarket()">
                        üîç Analyze Market
                    </button>
                </div>
            </div>

            <!-- Market Analysis -->
            <div class="section">
                <div class="section-title">
                    <span>üìä</span>
                    Market Analysis
                </div>
                <div class="chart-placeholder">
                    üìâ Real-time Chart Visualization (Integration with TradingView/Chart.js)
                </div>
                <div id="analysis-output" style="margin-top: 20px; display: none;">
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">AI Market Analysis</span>
                            <span>ü§ñ</span>
                        </div>
                        <div id="analysis-text" style="color: var(--dark); line-height: 1.6; white-space: pre-wrap;"></div>
                    </div>
                </div>
            </div>

            <!-- Trade Log -->
            <div class="section">
                <div class="section-title">
                    <span>üìã</span>
                    Trade History
                </div>
                <div class="trade-log" id="trade-log">
                    <p style="text-align: center; color: var(--gray); padding: 40px;">
                        No trades yet. Start the AI trading bot to begin.
                    </p>
                </div>
            </div>
        </main>
    </div>

    <script>
        let tradingActive = false;
        let portfolioValue = 100000; // Start with $100K
        let trades = [];
        let tradingInterval = null;

        // Load saved token
        const tokenInput = document.getElementById('github-token');
        tokenInput.value = localStorage.getItem('gh_token') || '';
        tokenInput.addEventListener('change', e => localStorage.setItem('gh_token', e.target.value));

        // Initialize dashboard
        updateDashboard();

        async function analyzeMarket() {
            const token = document.getElementById('github-token').value.trim();
            const model = document.getElementById('ai-model').value;
            const symbol = document.getElementById('symbol').value;
            const strategy = document.getElementById('strategy').value;

            if (!token) {
                alert('Please enter your GitHub token');
                return;
            }

            const analysisOutput = document.getElementById('analysis-output');
            const analysisText = document.getElementById('analysis-text');

            analysisOutput.style.display = 'block';
            analysisText.innerHTML = '<div class="spinner"></div> Analyzing market conditions...';

            try {
                const prompt = `Analyze the current market conditions for ${symbol} using ${strategy} strategy.

Provide:
1. Current market trend (bullish/bearish/neutral)
2. Key support and resistance levels
3. Trading recommendation (buy/sell/hold)
4. Risk factors to consider
5. Optimal entry and exit points

Keep analysis concise and actionable.`;

                const res = await fetch('https://models.inference.ai.azure.com/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: [
                            {
                                role: 'system',
                                content: 'You are AION-Quant, an expert quantitative trading analyst. Provide precise, data-driven market analysis.'
                            },
                            { role: 'user', content: prompt }
                        ],
                        temperature: 0.3,
                        max_tokens: 1000
                    })
                });

                if (!res.ok) {
                    const err = await res.json();
                    throw new Error(err.error?.message || 'HTTP ' + res.status);
                }

                const data = await res.json();
                const analysis = data.choices[0].message.content;

                analysisText.textContent = analysis;

                // Update AI confidence
                const confidence = Math.floor(Math.random() * 20 + 75); // 75-95%
                document.getElementById('ai-confidence').textContent = confidence + '%';

            } catch (err) {
                analysisText.innerHTML = '<span style="color: var(--danger);">Error: ' + err.message + '</span>';
            }
        }

        async function startTrading() {
            const token = document.getElementById('github-token').value.trim();

            if (!token) {
                alert('Please enter your GitHub token');
                return;
            }

            if (tradingActive) return;

            tradingActive = true;
            document.getElementById('start-bot').disabled = true;
            document.getElementById('stop-bot').disabled = false;

            // Simulate trading activity every 5-10 seconds
            tradingInterval = setInterval(() => {
                executeTrade();
            }, Math.random() * 5000 + 5000);

            alert('üöÄ AI Trading Bot activated! Monitoring market conditions...');
        }

        function stopTrading() {
            if (!tradingActive) return;

            tradingActive = false;
            document.getElementById('start-bot').disabled = false;
            document.getElementById('stop-bot').disabled = true;

            if (tradingInterval) {
                clearInterval(tradingInterval);
                tradingInterval = null;
            }

            alert('‚èπÔ∏è Trading bot stopped.');
        }

        function executeTrade() {
            const symbol = document.getElementById('symbol').value;
            const positionSize = parseFloat(document.getElementById('position-size').value);
            const strategy = document.getElementById('strategy').value;

            // Simulate trade execution
            const isBuy = Math.random() > 0.5;
            const priceChange = (Math.random() - 0.48) * 0.05; // Slight positive bias
            const pnl = positionSize * priceChange;
            const price = Math.random() * 100 + 50;

            const trade = {
                id: trades.length + 1,
                symbol: symbol,
                type: isBuy ? 'BUY' : 'SELL',
                price: price.toFixed(2),
                size: positionSize,
                pnl: pnl,
                strategy: strategy,
                timestamp: new Date().toLocaleTimeString()
            };

            trades.unshift(trade);
            portfolioValue += pnl;

            addTradeToLog(trade);
            updateDashboard();
        }

        function addTradeToLog(trade) {
            const tradeLog = document.getElementById('trade-log');

            // Clear placeholder
            if (trades.length === 1) {
                tradeLog.innerHTML = '';
            }

            const entry = document.createElement('div');
            entry.className = `trade-entry ${trade.type.toLowerCase()}`;
            entry.innerHTML = `
                <div class="trade-info">
                    <div class="trade-symbol">${trade.type} ${trade.symbol}</div>
                    <div class="trade-details">
                        Price: $${trade.price} | Size: $${trade.size.toLocaleString()} |
                        Strategy: ${trade.strategy} | ${trade.timestamp}
                    </div>
                </div>
                <div class="trade-pnl" style="color: ${trade.pnl >= 0 ? 'var(--primary)' : 'var(--danger)'}">
                    ${trade.pnl >= 0 ? '+' : ''}$${trade.pnl.toFixed(2)}
                </div>
            `;

            tradeLog.insertBefore(entry, tradeLog.firstChild);

            // Keep only last 20 trades in view
            while (tradeLog.children.length > 20) {
                tradeLog.removeChild(tradeLog.lastChild);
            }
        }

        function updateDashboard() {
            const startValue = 100000;
            const totalPnL = portfolioValue - startValue;
            const totalPnLPct = (totalPnL / startValue) * 100;

            document.getElementById('portfolio-value').textContent =
                '$' + portfolioValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});

            const changeEl = document.getElementById('portfolio-change');
            changeEl.textContent = (totalPnLPct >= 0 ? '+' : '') + totalPnLPct.toFixed(2) + '%';
            changeEl.className = 'card-change ' + (totalPnLPct >= 0 ? 'positive' : 'negative');

            // Calculate daily P&L (last 24h trades)
            const dailyTrades = trades; // In real app, filter by timestamp
            const dailyPnL = dailyTrades.reduce((sum, t) => sum + t.pnl, 0);
            const dailyPnLPct = (dailyPnL / portfolioValue) * 100;

            document.getElementById('daily-pnl').textContent =
                (dailyPnL >= 0 ? '+' : '') + '$' + dailyPnL.toFixed(2);
            document.getElementById('daily-pnl').style.color =
                dailyPnL >= 0 ? 'var(--primary)' : 'var(--danger)';

            const dailyPnLEl = document.getElementById('daily-pnl-pct');
            dailyPnLEl.textContent = (dailyPnLPct >= 0 ? '+' : '') + dailyPnLPct.toFixed(2) + '%';
            dailyPnLEl.className = 'card-change ' + (dailyPnLPct >= 0 ? 'positive' : 'negative');

            // Update trade stats
            document.getElementById('total-trades').textContent = trades.length;

            const winningTrades = trades.filter(t => t.pnl > 0).length;
            const winRate = trades.length > 0 ? (winningTrades / trades.length) * 100 : 0;
            document.getElementById('win-rate').textContent = winRate.toFixed(0) + '% Win Rate';
        }

        // Simulate live portfolio updates
        setInterval(() => {
            if (tradingActive && Math.random() > 0.7) {
                // Small portfolio fluctuations
                portfolioValue += (Math.random() - 0.5) * 100;
                updateDashboard();
            }
        }, 2000);
    </script>
</body>
</html>
